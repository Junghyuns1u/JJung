# 📊 프로젝트 요약

## 프로젝트 개요
- **프로젝트명**: 수면 패턴 분석 시스템
- **목적**: 소리 센서를 통한 수면 패턴 분석 및 수면 질 개선
- **기간**: 1주차 (데이터 수집 3일 + 분석)

## 파일 구조

```
sleep_analysis/
│
├── 📄 핵심 코드 파일
│   ├── sleep_analyzer.py          # 메인 분석 스크립트 (단일 조건)
│   ├── hypothesis_test.py         # 가설 검증 스크립트 (전체 비교)
│   └── generate_sample_data.py    # 샘플 데이터 생성기
│
├── 📁 데이터 폴더
│   ├── experiment_log.csv         # 실험 기록 (조건, 시간, 특이사항)
│   ├── sample_sleep_data_A.csv    # 조건 A: 평소 패턴
│   ├── sample_sleep_data_B.csv    # 조건 B: 취침 전 2시간 폰 사용
│   └── sample_sleep_data_C.csv    # 조건 C: 폰 사용 최소화
│
├── 📁 결과 폴더
│   ├── condition_comparison.png    # 조건별 비교 그래프
│   └── hypothesis_test_report.txt  # 가설 검증 보고서
│
├── 📖 문서
│   ├── README.md                   # 프로젝트 전체 설명서
│   ├── QUICKSTART.md              # 빠른 시작 가이드
│   ├── GITHUB_GUIDE.md            # GitHub 업로드 가이드
│   └── PROJECT_SUMMARY.md         # 이 파일
│
└── ⚙️ 설정 파일
    ├── requirements.txt           # Python 패키지 목록
    └── .gitignore                # Git 제외 파일 설정
```

## 주요 기능

### 1. sleep_analyzer.py
**기능**: 단일 조건 데이터 분석

- ✅ CSV 데이터 로드 및 전처리
- ✅ 이동평균으로 노이즈 완화
- ✅ 임계값 기반 소음 구간 분류
- ✅ 통계 지표 계산
  - 소음 구간 비율
  - 평균/최대/최소 dB
  - 연속 소음 구간 길이
  - 수면 초반 1시간 분석
- ✅ 시간-dB 그래프 시각화
- ✅ 분석 보고서 자동 생성

**사용법**:
```python
analyzer = SleepAnalyzer(threshold_db=40)
analyzer.load_data('data/sample_sleep_data_A.csv')
analyzer.preprocess_data()
analyzer.calculate_statistics()
analyzer.print_statistics()
analyzer.plot_data(save_path='results/sleep_analysis_A.png')
```

### 2. hypothesis_test.py
**기능**: 조건별 비교 및 가설 검증

- ✅ 다중 조건(A/B/C) 데이터 분석
- ✅ 조건별 통계 비교
- ✅ 가설 1 검증: dB와 각성의 관계
- ✅ 가설 2 검증: 폰 사용과 소음 구간 상관관계
- ✅ 피어슨 상관계수 계산
- ✅ 4개 비교 그래프 생성
  - 소음 구간 비율 비교
  - 평균 dB 비교
  - 폰 사용 시간 vs 소음 비율 산점도
  - 수면 초반 소음 비율 비교
- ✅ 최종 가설 검증 보고서

**사용법**:
```bash
python hypothesis_test.py
```

### 3. generate_sample_data.py
**기능**: 현실적인 샘플 데이터 생성

- ✅ 조건별 특성 반영
  - 조건 A: 정상적인 수면 패턴
  - 조건 B: 불안정한 수면 (높은 소음)
  - 조건 C: 안정적인 수면 (낮은 소음)
- ✅ 수면 단계별 dB 변화 시뮬레이션
- ✅ 무작위 뒤척임 이벤트
- ✅ 입면-깊은 수면-기상 패턴

## 과학적 근거

### 가설 1: dB 값과 각성
- **이론**: 갑작스러운 소음은 수면 단계 전환이나 각성을 유발
- **측정**: 임계값(40dB) 이상 구간을 '소음/각성 구간'으로 분류
- **예상**: 소음 구간이 뒤척임이나 각성과 연관

### 가설 2: 폰 사용과 수면 질
- **이론**: 
  - 블루라이트 → 멜라토닌 억제
  - 각성 자극 → 수면 잠복기 증가
  - 불안정한 수면 → 더 많은 뒤척임
- **측정**: 조건 B(폰 사용 2시간)와 조건 A(평소) 비교
- **예상**: 조건 B에서 소음 구간 비율 ≥ 5%p 증가

## 통계 기법

1. **기술통계**
   - 평균, 표준편차, 최대/최소값
   - 비율 계산

2. **이동평균 (Moving Average)**
   - 윈도우 크기: 5
   - 목적: 측정 노이즈 완화

3. **상관분석 (Pearson Correlation)**
   - 폰 사용 시간 vs 소음 비율
   - r = 0.989 (강한 양의 상관)

4. **임계값 분류**
   - 40dB 기준 이진 분류
   - 소음/정상 구간 판별

## 예시 결과 (샘플 데이터)

| 조건 | 평균 dB | 최대 dB | 소음 비율 | 폰 사용(분) |
|------|---------|---------|-----------|-------------|
| A    | 32.3    | 52.8    | 1.15%     | 30          |
| B    | 33.5    | 65.1    | 2.37%     | 120         |
| C    | 31.3    | 49.0    | 0.57%     | 10          |

### 가설 검증 결과
- **가설 1**: ✅ 지지 (소음 구간 평균 1.36% 관찰)
- **가설 2**: ❌ 기각 (차이 1.22%p < 5%p 기준)
  - 단, 강한 상관관계는 확인 (r=0.989)
  - 표본 크기 부족 가능성

## 기술 스택

- **언어**: Python 3.7+
- **핵심 라이브러리**:
  - `pandas`: 데이터 처리
  - `numpy`: 수치 계산
  - `matplotlib`: 시각화
  - `seaborn`: 고급 시각화
  - `scipy`: 통계 분석

## 학습 목표

### 코딩 능력
- ✅ 파일 입출력 (CSV)
- ✅ 데이터 구조 (DataFrame)
- ✅ 반복문과 조건문
- ✅ 함수와 클래스
- ✅ 라이브러리 활용

### 과학적 탐구
- ✅ 가설 설정 및 검증
- ✅ 변인 통제
- ✅ 정량적 데이터 수집
- ✅ 통계 분석
- ✅ 결과 해석 및 논의

### 센서 이해
- ✅ 마이크의 작동 원리
- ✅ dB(데시벨) 단위
- ✅ 소리의 측정과 기록
- ✅ 센서 데이터의 전처리

## 확장 가능성

### 단기 개선
- [ ] 웹 인터페이스 (Streamlit)
- [ ] 더 많은 통계 지표
- [ ] 주간/월간 추세 분석

### 장기 발전
- [ ] 실시간 분석
- [ ] 머신러닝 수면 단계 분류
- [ ] 다른 센서 통합 (심박, 움직임)
- [ ] 수면 질 점수화 시스템

## 활용 방안

### 교육
- 과학 탐구 보고서
- 정보 과목 프로젝트
- 통계 수업 사례

### 개인
- 수면 습관 개선
- 라이프스타일 변화 추적
- 건강 관리

### 연구
- 수면 관련 연구 기초 데이터
- 환경 요인과 수면 관계
- 개인별 수면 패턴 비교

## 한계 및 개선점

### 한계
1. ❌ 스마트폰 마이크 정확도 제한
2. ❌ 주변 소음 영향
3. ❌ 작은 표본 크기 (3일)
4. ❌ 주관적 수면 질 미측정

### 개선 방안
1. ✅ 측정 환경 통제 강화
2. ✅ 측정 기간 연장 (1-2주)
3. ✅ 수면 일기 병행
4. ✅ 다중 측정 지표 도입

## 윤리 고려사항

- ✅ 개인정보 보호 (데이터 비공개)
- ✅ 가족 동의 (녹음 가능성)
- ✅ 데이터 보안 (로컬 저장)
- ✅ 연구 목적 명확화

## 참고 자료

### 수면 과학
- National Sleep Foundation
- WHO 야간 소음 가이드라인
- 수면 단계와 각성 연구

### 기술 문서
- Python pandas documentation
- Matplotlib gallery
- Scipy stats module

## 라이선스
MIT License - 교육 목적 자유 사용

## 제작 정보
- **버전**: 1.0
- **날짜**: 2025-11-15
- **목적**: 학교 과학 탐구 프로젝트
